strategy:
  matrix:
    os: [ubuntu-latest, macos-latest, windows-latest]
    python-version: ["3.8", "3.12"]

steps:
  - uses: actions/checkout@v4
  - uses: actions/setup-python@v5
    with:
      python-version: ${{ matrix.python-version }}
  - run: python -m pip install --upgrade pip tox hatch
  - run: tox
  - if: ${{ matrix.os == 'ubuntu-latest' }}
    run: hatch build
  - uses: codecov/codecov-action@v4
    env:
      CODECOV_TOKEN: ${{ secrets.CODECOV_TOKEN }}
